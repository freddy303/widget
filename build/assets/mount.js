(function(){if(!customElements.get("triplomat-widget")){class n extends HTMLElement{constructor(){super()}}customElements.define("triplomat-widget",n)}function l(n,{theme:d="standard",lightMode:m=!0,url:a="http://127.0.0.1:8000/widget"}={}){const s=document.createElement("triplomat-widget");document.body.appendChild(s);const c=s.attachShadow({mode:"open"}),o=document.createElement("link");o.rel="stylesheet",o.href=`${a.replace("#","build/assets")}/mount.css`,c.appendChild(o),o.onload=()=>{const t=document.createElement("div");t.classList.add("TriplomatWidgetContainer"),t.addEventListener("click",i=>{i.target===t&&s.remove()}),c.appendChild(t);const e=document.createElement("iframe"),p=new URL(`${a}/${d}`).origin,r=()=>{try{e.contentWindow.postMessage(n,p)}catch(i){console.error("Failed to post message:",i)}};e.addEventListener("load",r),e.onreadystatechange=()=>{e.readyState==="complete"&&r()},e.src=`${a}/${d}?lightMode=${m}`,t.appendChild(e),console.log("Widget mounted")}}window.TriplomatWidget={mount:l},console.log("Mount script loaded")})();
