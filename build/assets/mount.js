(function(){if(!customElements.get("triplomat-widget")){class o extends HTMLElement{constructor(){super()}}customElements.define("triplomat-widget",o)}function c(o,{theme:l="standard",lightMode:r=!0,url:s="http://127.0.0.1:8000/widget"}={}){const d=document.createElement("triplomat-widget");document.body.appendChild(d);const a=d.attachShadow({mode:"open"}),n=document.createElement("link");n.rel="stylesheet",n.href=`${s.replace("#","build/assets")}/mount.css`,a.appendChild(n),n.onload=()=>{const e=document.createElement("div");e.classList.add("TriplomatWidgetContainer"),e.addEventListener("click",i=>{i.target===e&&d.remove()}),a.appendChild(e);const t=document.createElement("iframe");t.src=`${s}/${l}?lightMode=${r}`,e.appendChild(t),t.onload=function(){const i=new URL(t.src).origin;console.log("Sending data to widget:",o),console.log("Target origin:",i),t.contentWindow.postMessage(o,i)},console.log("Widget mounted")}}window.TriplomatWidget={mount:c},console.log("Mount script loaded")})();
