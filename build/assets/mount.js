(function(){if(!customElements.get("triplomat-widget")){class o extends HTMLElement{constructor(){super()}}customElements.define("triplomat-widget",o)}function a(o,{theme:s="standard",lightMode:r=!0,url:l="http://127.0.0.1:8000/widget"}={}){const d=document.createElement("triplomat-widget");document.body.appendChild(d);const c=d.attachShadow({mode:"open"}),n=document.createElement("link");n.rel="stylesheet",n.href=`${l.replace("#","build/assets")}/mount.css`,c.appendChild(n),n.onload=()=>{const t=document.createElement("div");t.classList.add("TriplomatWidgetContainer"),t.addEventListener("click",i=>{i.target===t&&d.remove()}),c.appendChild(t);const e=document.createElement("iframe");e.src=`${l}/${s}?lightMode=${r}`,t.appendChild(e),e.onload=function(){const i=new URL(e.src).origin;console.log("Sending data to widget:",o),console.log("Target origin:",i),console.log("Iframe src:",e.src),e.contentWindow.postMessage(o,i)},console.log("Widget mounted")}}window.TriplomatWidget={mount:a},console.log("Mount script loaded")})();
