(function(){if(!customElements.get("triplomat-widget")){class o extends HTMLElement{constructor(){super()}}customElements.define("triplomat-widget",o)}function c(o,{theme:d="standard",lightMode:r=!0,url:l="http://127.0.0.1:8000/widget"}={}){const s=document.createElement("triplomat-widget");document.body.appendChild(s);const a=s.attachShadow({mode:"open"}),n=document.createElement("link");n.rel="stylesheet",n.href=`${l.replace("#","build/assets")}/mount.css`,a.appendChild(n),n.onload=()=>{const t=document.createElement("div");t.classList.add("TriplomatWidgetContainer"),t.addEventListener("click",i=>{i.target===t&&s.remove()}),a.appendChild(t);const e=document.createElement("iframe");e.src=`${l}/${d}?lightMode=${r}`,t.appendChild(e),e.onload=()=>{const i=new URL(e.src).origin;console.log("Sending data to widget:",o),console.log("Target origin:",i),console.log("Iframe src:",e.src),setTimeout(()=>{console.log("Posting message to iframe"),e.contentWindow.postMessage(o,i)},3e3)},console.log("Widget mounted")}}window.TriplomatWidget={mount:c},console.log("Mount script loaded")})();
