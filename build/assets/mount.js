(function(){if(!customElements.get("triplomat-widget")){class o extends HTMLElement{constructor(){super()}}customElements.define("triplomat-widget",o)}function m(o,{theme:s="standard",lightMode:g=!0,url:d="http://127.0.0.1:8000/widget"}={}){const a=document.createElement("triplomat-widget");document.body.appendChild(a);const l=a.attachShadow({mode:"open"}),n=document.createElement("link");n.rel="stylesheet",n.href=`${d.replace("#","build/assets")}/mount.css`,l.appendChild(n),n.onload=()=>{const t=document.createElement("div");t.classList.add("TriplomatWidgetContainer"),t.addEventListener("click",i=>{i.target===t&&a.remove()}),l.appendChild(t);const e=document.createElement("iframe"),c=new URL(`${d}/${s}`).origin,r=()=>{try{console.log("Sending data to widget:",o),console.log("Target origin:",c),e.contentWindow.postMessage(o,c),console.log("Message posted successfully")}catch(i){console.error("Failed to post message:",i)}};e.addEventListener("load",r),e.onreadystatechange=()=>{e.readyState==="complete"&&r()},e.src=`${d}/${s}?lightMode=${g}`,t.appendChild(e),console.log("Widget mounted")}}window.TriplomatWidget={mount:m},console.log("Mount script loaded")})();
